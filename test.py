import streamlit as st

st.set_page_config(page_title="간호 진로 탐색 앱", layout="wide")

# ======================
# 데이터 준비
# ======================

# 병원 내 직무
hospital_jobs = {
    "응급실 간호사": {"설명": "응급 상황에서 환자의 생명을 지키기 위해 빠르게 대처하는 간호사.", "필요 역량": "빠른 판단력, 침착함, 체력"},
    "수술실 간호사": {"설명": "수술 과정에서 환자와 의료진을 지원하는 간호사.", "필요 역량": "세심함, 집중력, 체력"},
    "소아과 간호사": {"설명": "어린이 환자와 보호자를 돌보는 간호사.", "필요 역량": "공감 능력, 인내심, 친절함"},
    "정신건강 간호사": {"설명": "정신질환 환자와 가족을 돕는 간호사.", "필요 역량": "공감 능력, 인내심, 의사소통 능력"},
    "중환자실 간호사": {"설명": "중환자실에서 위중한 환자를 전문적으로 돌보는 간호사.", "필요 역량": "집중력, 전문성, 심리적 회복력"}
}

# 병원 외 직무
non_hospital_jobs = {
    "군 간호사": {"설명": "군 병원이나 부대에서 군인들의 건강을 돌보는 간호사.", "필요 역량": "리더십, 책임감, 조직 적응력"},
    "연구 간호사": {"설명": "임상시험과 의학 연구를 지원하는 간호사.", "필요 역량": "분석적 사고, 정확성, 문서작성 능력"},
    "학교 보건교사": {"설명": "학교에서 학생들의 건강을 관리하고 보건교육을 담당.", "필요 역량": "교육 능력, 소통 능력, 학생 지도력"},
    "보건소 간호사": {"설명": "지역 주민의 건강을 돌보고 예방접종, 보건교육 등을 담당.", "필요 역량": "소통 능력, 공공서비스 마인드, 조직력"},
    "산업 보건 간호사": {"설명": "기업에서 근로자의 건강과 안전을 관리하는 간호사.", "필요 역량": "산업 안전 지식, 상담 능력, 관리 능력"}
}

# Q&A 데이터
qa_list = [
    {"카테고리": "입시 준비", "질문": "간호학과에 가려면 어떤 과목을 준비해야 하나요?", "답변": "생명과학, 화학, 영어 과목이 중요하며, 논술이나 면접 대비도 필요합니다."},
    {"카테고리": "입시 준비", "질문": "면접에서 자주 묻는 질문은 무엇인가요?", "답변": "간호사가 되고 싶은 이유, 힘든 상황을 극복한 경험, 봉사 경험 등을 자주 묻습니다."},
    {"카테고리": "대학 생활", "질문": "간호학과의 수업은 어떻게 구성되나요?", "답변": "1~2학년은 기초의학 및 간호학 이론, 3~4학년은 임상 실습이 중심입니다."},
    {"카테고리": "대학 생활", "질문": "실습은 힘든가요?", "답변": "체력적으로 힘들지만 환자를 직접 만나 배울 수 있어 보람이 큽니다."},
    {"카테고리": "진로", "질문": "병원 간호사 말고도 할 수 있는 일이 있나요?", "답변": "제약회사, 보건소, 학교, 군대, 해외 취업 등 다양한 길이 있습니다."},
    {"카테고리": "해외 취업", "질문": "해외에서도 간호사로 일할 수 있나요?", "답변": "추가 시험과 언어 능력이 필요하지만, 미국, 호주 등에서 활동 가능합니다."}
]

# ======================
# UI 메뉴
# ======================
st.title("🏥 간호 진로 탐색 가이드")

menu = st.sidebar.radio("메뉴 선택", ["홈", "간호사 직무 탐색", "적성 테스트", "입시/진로 Q&A"])

# ======================
# 홈
# ======================
if menu == "홈":
    st.subheader("📌 앱 소개")
    st.write(
        """
        이 앱은 간호학과를 지망하는 학생들을 위해 만들어졌습니다.  
        - **간호사 직무 탐색**: 병원 내 / 병원 외 직무를 탐색할 수 있습니다.  
        - **적성 테스트**: 성향에 따라 어울리는 간호사 직무를 추천합니다.  
        - **입시/진로 Q&A**: 입시, 대학 생활, 진로, 해외 취업에 대한 질문과 답변을 모아두었습니다.  
        """
    )

# ======================
# 간호사 직무 탐색
# ======================
elif menu == "간호사 직무 탐색":
    st.subheader("🔎 간호사 직무 탐색")

    category = st.radio("직무 카테고리 선택", ["병원 내 직무", "병원 외 직무", "전체"])

    if category == "병원 내 직무":
        jobs = hospital_jobs
    elif category == "병원 외 직무":
        jobs = non_hospital_jobs
    else:
        jobs = {**hospital_jobs, **non_hospital_jobs}

    for job, info in jobs.items():
        with st.expander(f"👉 {job}"):
            st.write(f"**설명:** {info['설명']}")
            st.write(f"**필요 역량:** {info['필요 역량']}")

# ======================
# 적성 테스트
# ======================
elif menu == "적성 테스트":
    st.subheader("🧩 나에게 맞는 간호사 직무 찾기")

    q1 = st.radio("1. 어떤 상황에서 더 잘 대처하나요?", 
                  ["긴박한 상황에서도 침착하게 대처한다", "정확하고 세심하게 일하는 걸 좋아한다", "사람들을 잘 위로하고 공감한다"])
    q2 = st.radio("2. 내가 더 잘하는 것은?", 
                  ["빠른 판단과 실행", "계획대로 차근차근 진행", "사람의 마음을 읽고 소통"])
    q3 = st.radio("3. 선호하는 근무 환경은?", 
                  ["위급 상황이 많은 곳", "정해진 절차와 팀워크가 중요한 곳", "아이들과 함께하는 환경"])

    if st.button("결과 확인하기"):
        scores = {job: 0 for job in list(hospital_jobs.keys()) + list(non_hospital_jobs.keys())}

        if q1 == "긴박한 상황에서도 침착하게 대처한다":
            scores["응급실 간호사"] += 1; scores["군 간호사"] += 1
        elif q1 == "정확하고 세심하게 일하는 걸 좋아한다":
            scores["수술실 간호사"] += 1; scores["연구 간호사"] += 1
        else:
            scores["소아과 간호사"] += 1; scores["학교 보건교사"] += 1

        if q2 == "빠른 판단과 실행":
            scores["응급실 간호사"] += 1; scores["군 간호사"] += 1
        elif q2 == "계획대로 차근차근 진행":
            scores["수술실 간호사"] += 1; scores["연구 간호사"] += 1
        else:
            scores["소아과 간호사"] += 1; scores["학교 보건교사"] += 1

        if q3 == "위급 상황이 많은 곳":
            scores["응급실 간호사"] += 1; scores["군 간호사"] += 1
        elif q3 == "정해진 절차와 팀워크가 중요한 곳":
            scores["수술실 간호사"] += 1; scores["연구 간호사"] += 1
        else:
            scores["소아과 간호사"] += 1; scores["학교 보건교사"] += 1

        best_jobs = [job for job, score in scores.items() if score == max(scores.values())]

        st.success(f"✅ 당신에게 잘 맞는 직무는: {', '.join(best_jobs)}")

        for job in best_jobs:
            info = hospital_jobs.get(job) or non_hospital_jobs.get(job)
            with st.expander(f"👉 {job} 자세히 보기"):
                st.write(f"**설명:** {info['설명']}")
                st.write(f"**필요 역량:** {info['필요 역량']}")

# ======================
# 입시/진로 Q&A
# ======================
elif menu == "입시/진로 Q&A":
    st.subheader("❓ 간호학과 입시/진로 Q&A")

    category = st.selectbox("카테고리 선택", ["전체", "입시 준비", "대학 생활", "진로", "해외 취업"])
    search = st.text_input("검색어 입력:")

    for qa in qa_list:
        if (category == "전체" or qa["카테고리"] == category) and (search == "" or search in qa["질문"]):
            with st.expander(f"[{qa['카테고리']}] Q: {qa['질문']}"):
                st.write(f"A: {qa['답변']}")
